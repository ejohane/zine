{"id":"zine-1tk","title":"Source Management API","description":"Create API endpoints for managing user sources (subscriptions to content providers).","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-13T13:11:49.297307-06:00","updated_at":"2025-12-13T13:13:24.698228-06:00","closed_at":"2025-12-13T13:13:24.698228-06:00"}
{"id":"zine-1tk.1","title":"Create GET /api/sources endpoint (list user sources)","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:49.364213-06:00","updated_at":"2025-12-13T13:11:49.364213-06:00","dependencies":[{"issue_id":"zine-1tk.1","depends_on_id":"zine-1tk","type":"parent-child","created_at":"2025-12-13T13:11:49.364528-06:00","created_by":"daemon"}]}
{"id":"zine-1tk.2","title":"Create POST /api/sources endpoint (add source)","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:49.429876-06:00","updated_at":"2025-12-13T13:11:49.429876-06:00","dependencies":[{"issue_id":"zine-1tk.2","depends_on_id":"zine-1tk","type":"parent-child","created_at":"2025-12-13T13:11:49.43016-06:00","created_by":"daemon"}]}
{"id":"zine-1tk.3","title":"Create DELETE /api/sources/:id endpoint (remove source)","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:11:49.495552-06:00","updated_at":"2025-12-13T13:11:49.495552-06:00","dependencies":[{"issue_id":"zine-1tk.3","depends_on_id":"zine-1tk","type":"parent-child","created_at":"2025-12-13T13:11:49.495874-06:00","created_by":"daemon"}]}
{"id":"zine-1tk.4","title":"Implement source validation by provider type","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:11:49.561872-06:00","updated_at":"2025-12-13T13:11:49.561872-06:00","dependencies":[{"issue_id":"zine-1tk.4","depends_on_id":"zine-1tk","type":"parent-child","created_at":"2025-12-13T13:11:49.56218-06:00","created_by":"daemon"}]}
{"id":"zine-1tk.5","title":"Write source route tests","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:11:49.628967-06:00","updated_at":"2025-12-13T13:11:49.628967-06:00","dependencies":[{"issue_id":"zine-1tk.5","depends_on_id":"zine-1tk","type":"parent-child","created_at":"2025-12-13T13:11:49.629309-06:00","created_by":"daemon"}]}
{"id":"zine-3dl","title":"YouTube Provider Integration","description":"Implement the YouTube provider for fetching channel videos via YouTube Data API.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-13T13:11:52.686033-06:00","updated_at":"2025-12-13T13:13:24.8162-06:00","closed_at":"2025-12-13T13:13:24.8162-06:00"}
{"id":"zine-3dl.1","title":"Create YouTube provider fetcher","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:11:52.749739-06:00","updated_at":"2025-12-13T13:11:52.749739-06:00","dependencies":[{"issue_id":"zine-3dl.1","depends_on_id":"zine-3dl","type":"parent-child","created_at":"2025-12-13T13:11:52.750035-06:00","created_by":"daemon"}]}
{"id":"zine-3dl.2","title":"Implement channel video fetching via API","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:11:52.812565-06:00","updated_at":"2025-12-13T13:11:52.812565-06:00","dependencies":[{"issue_id":"zine-3dl.2","depends_on_id":"zine-3dl","type":"parent-child","created_at":"2025-12-13T13:11:52.812852-06:00","created_by":"daemon"}]}
{"id":"zine-3dl.3","title":"Map YouTube API response to raw envelope format","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:11:52.873156-06:00","updated_at":"2025-12-13T13:11:52.873156-06:00","dependencies":[{"issue_id":"zine-3dl.3","depends_on_id":"zine-3dl","type":"parent-child","created_at":"2025-12-13T13:11:52.873473-06:00","created_by":"daemon"}]}
{"id":"zine-3dl.4","title":"Handle YouTube API rate limits and errors","description":"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-13T13:11:52.935508-06:00","updated_at":"2025-12-13T13:11:52.935508-06:00","dependencies":[{"issue_id":"zine-3dl.4","depends_on_id":"zine-3dl","type":"parent-child","created_at":"2025-12-13T13:11:52.935806-06:00","created_by":"daemon"}]}
{"id":"zine-3dl.5","title":"Write YouTube provider tests","description":"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-13T13:11:52.997004-06:00","updated_at":"2025-12-13T13:11:52.997004-06:00","dependencies":[{"issue_id":"zine-3dl.5","depends_on_id":"zine-3dl","type":"parent-child","created_at":"2025-12-13T13:11:52.998202-06:00","created_by":"daemon"}]}
{"id":"zine-8qe","title":"Substack Provider Integration","description":"Implement the Substack provider for fetching newsletter posts.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-13T13:11:59.03384-06:00","updated_at":"2025-12-13T13:13:25.248095-06:00","closed_at":"2025-12-13T13:13:25.248095-06:00"}
{"id":"zine-8qe.1","title":"Create Substack provider fetcher","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:11:59.100315-06:00","updated_at":"2025-12-13T13:11:59.100315-06:00","dependencies":[{"issue_id":"zine-8qe.1","depends_on_id":"zine-8qe","type":"parent-child","created_at":"2025-12-13T13:11:59.100623-06:00","created_by":"daemon"}]}
{"id":"zine-8qe.2","title":"Implement newsletter post fetching","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:11:59.164306-06:00","updated_at":"2025-12-13T13:11:59.164306-06:00","dependencies":[{"issue_id":"zine-8qe.2","depends_on_id":"zine-8qe","type":"parent-child","created_at":"2025-12-13T13:11:59.164597-06:00","created_by":"daemon"}]}
{"id":"zine-8qe.3","title":"Map Substack response to raw envelope format","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:11:59.229245-06:00","updated_at":"2025-12-13T13:11:59.229245-06:00","dependencies":[{"issue_id":"zine-8qe.3","depends_on_id":"zine-8qe","type":"parent-child","created_at":"2025-12-13T13:11:59.229533-06:00","created_by":"daemon"}]}
{"id":"zine-8qe.4","title":"Write Substack provider tests","description":"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-13T13:11:59.292515-06:00","updated_at":"2025-12-13T13:11:59.292515-06:00","dependencies":[{"issue_id":"zine-8qe.4","depends_on_id":"zine-8qe","type":"parent-child","created_at":"2025-12-13T13:11:59.292877-06:00","created_by":"daemon"}]}
{"id":"zine-8wm","title":"CI/CD Pipeline","description":"Set up GitHub Actions for linting, type-checking, testing, and deployments with Turborepo caching.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-13T13:12:02.355999-06:00","updated_at":"2025-12-13T13:13:25.693457-06:00","closed_at":"2025-12-13T13:13:25.693457-06:00"}
{"id":"zine-8wm.1","title":"Create GitHub Actions CI workflow with Turborepo","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:12:02.421712-06:00","updated_at":"2025-12-13T13:12:02.421712-06:00","dependencies":[{"issue_id":"zine-8wm.1","depends_on_id":"zine-8wm","type":"parent-child","created_at":"2025-12-13T13:12:02.422013-06:00","created_by":"daemon"}]}
{"id":"zine-8wm.2","title":"Add lint and type-check jobs","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:12:02.485555-06:00","updated_at":"2025-12-13T13:12:02.485555-06:00","dependencies":[{"issue_id":"zine-8wm.2","depends_on_id":"zine-8wm","type":"parent-child","created_at":"2025-12-13T13:12:02.48587-06:00","created_by":"daemon"}]}
{"id":"zine-8wm.3","title":"Add worker test job (Vitest)","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:12:02.5479-06:00","updated_at":"2025-12-13T13:12:02.5479-06:00","dependencies":[{"issue_id":"zine-8wm.3","depends_on_id":"zine-8wm","type":"parent-child","created_at":"2025-12-13T13:12:02.548175-06:00","created_by":"daemon"}]}
{"id":"zine-8wm.4","title":"Add mobile test job (Jest)","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:12:02.611241-06:00","updated_at":"2025-12-13T13:12:02.611241-06:00","dependencies":[{"issue_id":"zine-8wm.4","depends_on_id":"zine-8wm","type":"parent-child","created_at":"2025-12-13T13:12:02.611619-06:00","created_by":"daemon"}]}
{"id":"zine-8wm.5","title":"Add worker staging deployment job","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:12:02.674976-06:00","updated_at":"2025-12-13T13:12:02.674976-06:00","dependencies":[{"issue_id":"zine-8wm.5","depends_on_id":"zine-8wm","type":"parent-child","created_at":"2025-12-13T13:12:02.675282-06:00","created_by":"daemon"}]}
{"id":"zine-8wm.6","title":"Add worker production deployment job","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:12:02.738632-06:00","updated_at":"2025-12-13T13:12:02.738632-06:00","dependencies":[{"issue_id":"zine-8wm.6","depends_on_id":"zine-8wm","type":"parent-child","created_at":"2025-12-13T13:12:02.738912-06:00","created_by":"daemon"}]}
{"id":"zine-8wm.7","title":"Document required GitHub secrets","description":"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-13T13:12:02.801624-06:00","updated_at":"2025-12-13T13:12:02.801624-06:00","dependencies":[{"issue_id":"zine-8wm.7","depends_on_id":"zine-8wm","type":"parent-child","created_at":"2025-12-13T13:12:02.801928-06:00","created_by":"daemon"}]}
{"id":"zine-9uz","title":"Mobile Replicache Integration","description":"**DEPENDS ON: zine-vnf (Expo Setup), zine-akb (Shared Package), zine-phq (Clerk Auth)**\n\nSet up Replicache client on mobile with proper initialization, subscription hooks, and integration with Clerk auth.\n\n## Why This Matters\nReplicache provides the local-first sync capability. This integration enables instant UI updates and offline support - core to the Zine experience.\n\n## Implementation Details\n\n### Replicache Client Setup (lib/replicache.ts)\n```typescript\nimport { Replicache } from 'replicache';\nimport { mutators } from '@zine/shared';\n\nconst API_URL = process.env.EXPO_PUBLIC_API_URL!;\n\nexport function createReplicacheClient(\n  userId: string,\n  getToken: () =\u003e Promise\u003cstring\u003e\n) {\n  return new Replicache({\n    name: `zine-${userId}`,\n    licenseKey: process.env.EXPO_PUBLIC_REPLICACHE_LICENSE_KEY!,\n    \n    pushURL: `${API_URL}/api/replicache/push`,\n    pullURL: `${API_URL}/api/replicache/pull`,\n    \n    auth: async () =\u003e {\n      const token = await getToken();\n      return token;\n    },\n    \n    mutators,\n    \n    // Pull every 60 seconds when app is active\n    pullInterval: 60000,\n  });\n}\n```\n\n### useReplicache Hook (hooks/useReplicache.ts)\n```typescript\nimport { createContext, useContext, useEffect, useState, ReactNode } from 'react';\nimport { Replicache } from 'replicache';\nimport { useAuth } from '@clerk/clerk-expo';\nimport { createReplicacheClient } from '../lib/replicache';\nimport { mutators } from '@zine/shared';\n\ntype ReplicacheInstance = Replicache\u003ctypeof mutators\u003e;\n\nconst ReplicacheContext = createContext\u003cReplicacheInstance | null\u003e(null);\n\nexport function ReplicacheProvider({ children }: { children: ReactNode }) {\n  const { userId, getToken } = useAuth();\n  const [rep, setRep] = useState\u003cReplicacheInstance | null\u003e(null);\n  \n  useEffect(() =\u003e {\n    if (!userId) {\n      setRep(null);\n      return;\n    }\n    \n    const r = createReplicacheClient(userId, getToken);\n    setRep(r);\n    \n    return () =\u003e {\n      r.close();\n    };\n  }, [userId]);\n  \n  return (\n    \u003cReplicacheContext.Provider value={rep}\u003e\n      {children}\n    \u003c/ReplicacheContext.Provider\u003e\n  );\n}\n\nexport function useReplicache() {\n  const rep = useContext(ReplicacheContext);\n  if (!rep) {\n    throw new Error('useReplicache must be used within ReplicacheProvider');\n  }\n  return rep;\n}\n```\n\n### useSubscribe Hook (hooks/useSubscribe.ts)\n```typescript\nimport { useEffect, useState } from 'react';\nimport { Replicache, ReadTransaction } from 'replicache';\nimport { useReplicache } from './useReplicache';\n\nexport function useSubscribe\u003cT\u003e(\n  query: (tx: ReadTransaction) =\u003e Promise\u003cT\u003e,\n  deps: unknown[] = []\n): T | undefined {\n  const rep = useReplicache();\n  const [data, setData] = useState\u003cT\u003e();\n  \n  useEffect(() =\u003e {\n    const unsubscribe = rep.subscribe(query, {\n      onData: setData,\n    });\n    \n    return unsubscribe;\n  }, [rep, ...deps]);\n  \n  return data;\n}\n\n// Convenience hooks\nexport function useInboxItems() {\n  return useSubscribe(async (tx) =\u003e {\n    const items = await tx.scan({ prefix: 'userItem/' }).toArray();\n    return items\n      .filter(([_, v]) =\u003e v.state === 'INBOX')\n      .sort((a, b) =\u003e b[1].ingestedAt.localeCompare(a[1].ingestedAt));\n  });\n}\n\nexport function useBookmarkedItems() {\n  return useSubscribe(async (tx) =\u003e {\n    const items = await tx.scan({ prefix: 'userItem/' }).toArray();\n    return items\n      .filter(([_, v]) =\u003e v.state === 'BOOKMARKED')\n      .sort((a, b) =\u003e b[1].bookmarkedAt.localeCompare(a[1].bookmarkedAt));\n  });\n}\n```\n\n### Integration with Root Layout\nAdd ReplicacheProvider to the provider hierarchy in `app/_layout.tsx`:\n```typescript\n\u003cClerkLoaded\u003e\n  \u003cReplicacheProvider\u003e\n    {/* ... rest of providers and Stack */}\n  \u003c/ReplicacheProvider\u003e\n\u003c/ClerkLoaded\u003e\n```\n\n## Parallelization\n- Task 1 (client setup) must complete first\n- Tasks 2-3 (useReplicache, useSubscribe hooks) can run IN PARALLEL after task 1\n- Task 4 (Clerk integration) can run with task 1\n- Task 5 (provider in layout) runs last\n\n## Key Files\n- `apps/mobile/lib/replicache.ts`\n- `apps/mobile/hooks/useReplicache.ts`\n- `apps/mobile/hooks/useSubscribe.ts`\n- Update `apps/mobile/app/_layout.tsx`\n\n## Acceptance Criteria\n- [ ] Replicache initializes when user signs in\n- [ ] Replicache closes when user signs out\n- [ ] useSubscribe returns reactive data\n- [ ] Mutations update local state immediately\n- [ ] Push/pull sync with server works","status":"open","priority":0,"issue_type":"epic","created_at":"2025-12-13T13:11:22.836417-06:00","updated_at":"2025-12-13T13:16:46.916998-06:00"}
{"id":"zine-9uz.1","title":"Create Replicache client setup and initialization","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:22.901063-06:00","updated_at":"2025-12-13T13:11:22.901063-06:00","dependencies":[{"issue_id":"zine-9uz.1","depends_on_id":"zine-9uz","type":"parent-child","created_at":"2025-12-13T13:11:22.901377-06:00","created_by":"daemon"}]}
{"id":"zine-9uz.2","title":"Create useReplicache hook for instance access","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:22.96488-06:00","updated_at":"2025-12-13T13:11:22.96488-06:00","dependencies":[{"issue_id":"zine-9uz.2","depends_on_id":"zine-9uz","type":"parent-child","created_at":"2025-12-13T13:11:22.965169-06:00","created_by":"daemon"}]}
{"id":"zine-9uz.3","title":"Create useSubscribe hook for reactive queries","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:23.028586-06:00","updated_at":"2025-12-13T13:11:23.028586-06:00","dependencies":[{"issue_id":"zine-9uz.3","depends_on_id":"zine-9uz","type":"parent-child","created_at":"2025-12-13T13:11:23.028913-06:00","created_by":"daemon"}]}
{"id":"zine-9uz.4","title":"Integrate Replicache with Clerk auth token","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:23.093765-06:00","updated_at":"2025-12-13T13:11:23.093765-06:00","dependencies":[{"issue_id":"zine-9uz.4","depends_on_id":"zine-9uz","type":"parent-child","created_at":"2025-12-13T13:11:23.094092-06:00","created_by":"daemon"}]}
{"id":"zine-9uz.5","title":"Add Replicache provider to root layout","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:23.156666-06:00","updated_at":"2025-12-13T13:11:23.156666-06:00","dependencies":[{"issue_id":"zine-9uz.5","depends_on_id":"zine-9uz","type":"parent-child","created_at":"2025-12-13T13:11:23.156999-06:00","created_by":"daemon"}]}
{"id":"zine-akb","title":"Shared Package - Domain Types \u0026 Schemas","description":"**DEPENDS ON: zine-un1 (Monorepo Setup)**\n\nBuild the shared package with TypeScript domain models, Zod validation schemas, Replicache mutator definitions, and constants.\n\n## Why This Matters\nThe shared package is imported by BOTH mobile and worker apps. It ensures type safety across the stack and defines the contract for Replicache sync.\n\n## Implementation Details\n\n### Key Types to Define (domain.ts)\n```typescript\n// Content types\nexport type ContentType = 'video' | 'podcast' | 'article' | 'post';\nexport type Provider = 'youtube' | 'spotify' | 'rss' | 'substack';\nexport type UserItemState = 'INBOX' | 'BOOKMARKED' | 'ARCHIVED';\n\n// Core domain types\nexport interface Item {\n  id: string;\n  contentType: ContentType;\n  provider: Provider;\n  providerId?: string;\n  canonicalUrl: string;\n  title?: string;\n  summary?: string;\n  author?: string;\n  publisher?: string;\n  publishedAt?: string;\n  thumbnailUrl?: string;\n  duration?: number;\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport interface UserItem {\n  id: string;\n  itemId: string;\n  state: UserItemState;\n  ingestedAt: string;\n  bookmarkedAt?: string;\n  archivedAt?: string;\n}\n\nexport interface Source {\n  id: string;\n  provider: Provider;\n  externalId: string;  // channel ID, feed URL, etc.\n  name: string;\n  enabled: boolean;\n  createdAt: string;\n}\n```\n\n### Replicache Mutators (mutators/index.ts)\n```typescript\nexport const mutators = {\n  // User item state transitions\n  bookmarkItem: async (tx, { itemId }: { itemId: string }) =\u003e {\n    const key = `userItem/${itemId}`;\n    const existing = await tx.get(key);\n    if (existing) {\n      await tx.set(key, {\n        ...existing,\n        state: 'BOOKMARKED',\n        bookmarkedAt: new Date().toISOString(),\n      });\n    }\n  },\n  \n  archiveItem: async (tx, { itemId }: { itemId: string }) =\u003e {\n    const key = `userItem/${itemId}`;\n    const existing = await tx.get(key);\n    if (existing) {\n      await tx.set(key, {\n        ...existing,\n        state: 'ARCHIVED',\n        archivedAt: new Date().toISOString(),\n      });\n    }\n  },\n  \n  // Source management\n  addSource: async (tx, source: Source) =\u003e { ... },\n  removeSource: async (tx, { id }: { id: string }) =\u003e { ... },\n};\n```\n\n### Zod Schemas (schemas/index.ts)\nCreate Zod schemas that mirror all TypeScript types for runtime validation.\n\n## Parallelization\n- Task 1 (domain types) must complete first\n- Tasks 2-5 can run IN PARALLEL after task 1\n- Task 6 (constants) can run anytime\n\n## Key Files to Create\n- `packages/shared/src/types/domain.ts`\n- `packages/shared/src/types/api.ts`\n- `packages/shared/src/types/sync.ts`\n- `packages/shared/src/mutators/index.ts`\n- `packages/shared/src/schemas/index.ts`\n- `packages/shared/src/constants/index.ts`\n- `packages/shared/src/index.ts` (barrel export)\n- `packages/shared/package.json`\n- `packages/shared/tsconfig.json`\n\n## Acceptance Criteria\n- [ ] `bun run typecheck` passes in shared package\n- [ ] Types can be imported from `@zine/shared`\n- [ ] Zod schemas validate sample data correctly\n- [ ] Mutators are properly typed","status":"open","priority":0,"issue_type":"epic","created_at":"2025-12-13T13:11:00.462086-06:00","updated_at":"2025-12-13T13:15:08.363803-06:00"}
{"id":"zine-akb.1","title":"Define domain types (Item, Source, UserItem states)","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:00.518556-06:00","updated_at":"2025-12-13T13:11:00.518556-06:00","dependencies":[{"issue_id":"zine-akb.1","depends_on_id":"zine-akb","type":"parent-child","created_at":"2025-12-13T13:11:00.518876-06:00","created_by":"daemon"}]}
{"id":"zine-akb.2","title":"Define API request/response types","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:11:00.57313-06:00","updated_at":"2025-12-13T13:11:00.57313-06:00","dependencies":[{"issue_id":"zine-akb.2","depends_on_id":"zine-akb","type":"parent-child","created_at":"2025-12-13T13:11:00.573477-06:00","created_by":"daemon"}]}
{"id":"zine-akb.3","title":"Define Replicache sync types (push/pull payloads)","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:00.62702-06:00","updated_at":"2025-12-13T13:11:00.62702-06:00","dependencies":[{"issue_id":"zine-akb.3","depends_on_id":"zine-akb","type":"parent-child","created_at":"2025-12-13T13:11:00.62732-06:00","created_by":"daemon"}]}
{"id":"zine-akb.4","title":"Create Zod schemas for domain validation","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:11:00.680503-06:00","updated_at":"2025-12-13T13:11:00.680503-06:00","dependencies":[{"issue_id":"zine-akb.4","depends_on_id":"zine-akb","type":"parent-child","created_at":"2025-12-13T13:11:00.680812-06:00","created_by":"daemon"}]}
{"id":"zine-akb.5","title":"Define shared Replicache mutators","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:00.732957-06:00","updated_at":"2025-12-13T13:11:00.732957-06:00","dependencies":[{"issue_id":"zine-akb.5","depends_on_id":"zine-akb","type":"parent-child","created_at":"2025-12-13T13:11:00.733261-06:00","created_by":"daemon"}]}
{"id":"zine-akb.6","title":"Define shared constants","description":"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-13T13:11:00.787646-06:00","updated_at":"2025-12-13T13:11:00.787646-06:00","dependencies":[{"issue_id":"zine-akb.6","depends_on_id":"zine-akb","type":"parent-child","created_at":"2025-12-13T13:11:00.787943-06:00","created_by":"daemon"}]}
{"id":"zine-atc","title":"Inbox Feature - UI \u0026 Logic","description":"Build the Inbox screen for triaging ingested content with Bookmark/Archive actions, filtering by provider and content type.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-13T13:11:31.276153-06:00","updated_at":"2025-12-13T13:13:21.161552-06:00","closed_at":"2025-12-13T13:13:21.161552-06:00"}
{"id":"zine-atc.1","title":"Create InboxItem component with swipe actions","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:31.339129-06:00","updated_at":"2025-12-13T13:11:31.339129-06:00","dependencies":[{"issue_id":"zine-atc.1","depends_on_id":"zine-atc","type":"parent-child","created_at":"2025-12-13T13:11:31.339423-06:00","created_by":"daemon"}]}
{"id":"zine-atc.2","title":"Create InboxList component with virtualization","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:31.40905-06:00","updated_at":"2025-12-13T13:11:31.40905-06:00","dependencies":[{"issue_id":"zine-atc.2","depends_on_id":"zine-atc","type":"parent-child","created_at":"2025-12-13T13:11:31.40935-06:00","created_by":"daemon"}]}
{"id":"zine-atc.3","title":"Create InboxFilters component (provider, content type)","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:11:31.47883-06:00","updated_at":"2025-12-13T13:11:31.47883-06:00","dependencies":[{"issue_id":"zine-atc.3","depends_on_id":"zine-atc","type":"parent-child","created_at":"2025-12-13T13:11:31.479139-06:00","created_by":"daemon"}]}
{"id":"zine-atc.4","title":"Implement bookmark mutator (INBOX -\u003e BOOKMARKED)","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:31.55023-06:00","updated_at":"2025-12-13T13:11:31.55023-06:00","dependencies":[{"issue_id":"zine-atc.4","depends_on_id":"zine-atc","type":"parent-child","created_at":"2025-12-13T13:11:31.550582-06:00","created_by":"daemon"}]}
{"id":"zine-atc.5","title":"Implement archive mutator (INBOX -\u003e ARCHIVED)","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:31.620822-06:00","updated_at":"2025-12-13T13:11:31.620822-06:00","dependencies":[{"issue_id":"zine-atc.5","depends_on_id":"zine-atc","type":"parent-child","created_at":"2025-12-13T13:11:31.621128-06:00","created_by":"daemon"}]}
{"id":"zine-atc.6","title":"Create Inbox screen Replicache subscription","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:31.691211-06:00","updated_at":"2025-12-13T13:11:31.691211-06:00","dependencies":[{"issue_id":"zine-atc.6","depends_on_id":"zine-atc","type":"parent-child","created_at":"2025-12-13T13:11:31.691556-06:00","created_by":"daemon"}]}
{"id":"zine-atc.7","title":"Add Inbox scoped search","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:11:31.761154-06:00","updated_at":"2025-12-13T13:11:31.761154-06:00","dependencies":[{"issue_id":"zine-atc.7","depends_on_id":"zine-atc","type":"parent-child","created_at":"2025-12-13T13:11:31.761499-06:00","created_by":"daemon"}]}
{"id":"zine-cjj","title":"Ingestion Pipeline - Core","description":"Implement the core ingestion pipeline orchestration with provider-agnostic processing, idempotency, and canonical resolution.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-13T13:11:46.671571-06:00","updated_at":"2025-12-13T13:13:24.616838-06:00","closed_at":"2025-12-13T13:13:24.616838-06:00"}
{"id":"zine-cjj.1","title":"Create ingestion pipeline orchestrator","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:46.739529-06:00","updated_at":"2025-12-13T13:11:46.739529-06:00","dependencies":[{"issue_id":"zine-cjj.1","depends_on_id":"zine-cjj","type":"parent-child","created_at":"2025-12-13T13:11:46.739847-06:00","created_by":"daemon"}]}
{"id":"zine-cjj.2","title":"Implement idempotency check (provider_items_seen table)","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:46.805291-06:00","updated_at":"2025-12-13T13:11:46.805291-06:00","dependencies":[{"issue_id":"zine-cjj.2","depends_on_id":"zine-cjj","type":"parent-child","created_at":"2025-12-13T13:11:46.8056-06:00","created_by":"daemon"}]}
{"id":"zine-cjj.3","title":"Implement canonical item resolution and upsert","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:46.871636-06:00","updated_at":"2025-12-13T13:11:46.871636-06:00","dependencies":[{"issue_id":"zine-cjj.3","depends_on_id":"zine-cjj","type":"parent-child","created_at":"2025-12-13T13:11:46.871943-06:00","created_by":"daemon"}]}
{"id":"zine-cjj.4","title":"Implement user_item creation (INBOX state)","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:46.938468-06:00","updated_at":"2025-12-13T13:11:46.938468-06:00","dependencies":[{"issue_id":"zine-cjj.4","depends_on_id":"zine-cjj","type":"parent-child","created_at":"2025-12-13T13:11:46.938789-06:00","created_by":"daemon"}]}
{"id":"zine-cjj.5","title":"Create enrichment scheduler for async metadata","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:11:47.005065-06:00","updated_at":"2025-12-13T13:11:47.005065-06:00","dependencies":[{"issue_id":"zine-cjj.5","depends_on_id":"zine-cjj","type":"parent-child","created_at":"2025-12-13T13:11:47.005395-06:00","created_by":"daemon"}]}
{"id":"zine-cjj.6","title":"Write pipeline integration tests","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:11:47.071205-06:00","updated_at":"2025-12-13T13:11:47.071205-06:00","dependencies":[{"issue_id":"zine-cjj.6","depends_on_id":"zine-cjj","type":"parent-child","created_at":"2025-12-13T13:11:47.071559-06:00","created_by":"daemon"}]}
{"id":"zine-gx8","title":"Item Detail Screen","description":"Build the item detail screen for viewing full item information with external link launch capability.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-13T13:11:40.482205-06:00","updated_at":"2025-12-13T13:13:23.963099-06:00","closed_at":"2025-12-13T13:13:23.963099-06:00"}
{"id":"zine-gx8.1","title":"Create item detail screen with dynamic route","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:40.548153-06:00","updated_at":"2025-12-13T13:11:40.548153-06:00","dependencies":[{"issue_id":"zine-gx8.1","depends_on_id":"zine-gx8","type":"parent-child","created_at":"2025-12-13T13:11:40.548439-06:00","created_by":"daemon"}]}
{"id":"zine-gx8.2","title":"Create ItemHeader component (title, thumbnail)","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:40.611428-06:00","updated_at":"2025-12-13T13:11:40.611428-06:00","dependencies":[{"issue_id":"zine-gx8.2","depends_on_id":"zine-gx8","type":"parent-child","created_at":"2025-12-13T13:11:40.611771-06:00","created_by":"daemon"}]}
{"id":"zine-gx8.3","title":"Create ItemMetadata component (author, publisher, duration)","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:11:40.674081-06:00","updated_at":"2025-12-13T13:11:40.674081-06:00","dependencies":[{"issue_id":"zine-gx8.3","depends_on_id":"zine-gx8","type":"parent-child","created_at":"2025-12-13T13:11:40.674371-06:00","created_by":"daemon"}]}
{"id":"zine-gx8.4","title":"Implement external link launch to original content","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:40.737875-06:00","updated_at":"2025-12-13T13:11:40.737875-06:00","dependencies":[{"issue_id":"zine-gx8.4","depends_on_id":"zine-gx8","type":"parent-child","created_at":"2025-12-13T13:11:40.738201-06:00","created_by":"daemon"}]}
{"id":"zine-gx8.5","title":"Add bookmark/archive actions from detail view","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:11:40.802937-06:00","updated_at":"2025-12-13T13:11:40.802937-06:00","dependencies":[{"issue_id":"zine-gx8.5","depends_on_id":"zine-gx8","type":"parent-child","created_at":"2025-12-13T13:11:40.803265-06:00","created_by":"daemon"}]}
{"id":"zine-h4i","title":"Home Feature - UI \u0026 Logic","description":"Build the Home screen as a curated launchpad with sections for recent bookmarks, content type shortcuts, and quick navigation.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-13T13:11:37.332193-06:00","updated_at":"2025-12-13T13:13:23.603568-06:00","closed_at":"2025-12-13T13:13:23.603568-06:00"}
{"id":"zine-h4i.1","title":"Create HomeSection component for content groups","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:37.39978-06:00","updated_at":"2025-12-13T13:11:37.39978-06:00","dependencies":[{"issue_id":"zine-h4i.1","depends_on_id":"zine-h4i","type":"parent-child","created_at":"2025-12-13T13:11:37.400087-06:00","created_by":"daemon"}]}
{"id":"zine-h4i.2","title":"Create RecentBookmarks section","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:37.46384-06:00","updated_at":"2025-12-13T13:11:37.46384-06:00","dependencies":[{"issue_id":"zine-h4i.2","depends_on_id":"zine-h4i","type":"parent-child","created_at":"2025-12-13T13:11:37.464128-06:00","created_by":"daemon"}]}
{"id":"zine-h4i.3","title":"Create content type shortcut sections (Podcasts, Videos)","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:11:37.527197-06:00","updated_at":"2025-12-13T13:11:37.527197-06:00","dependencies":[{"issue_id":"zine-h4i.3","depends_on_id":"zine-h4i","type":"parent-child","created_at":"2025-12-13T13:11:37.527502-06:00","created_by":"daemon"}]}
{"id":"zine-h4i.4","title":"Create Home screen with section composition","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:37.592068-06:00","updated_at":"2025-12-13T13:11:37.592068-06:00","dependencies":[{"issue_id":"zine-h4i.4","depends_on_id":"zine-h4i","type":"parent-child","created_at":"2025-12-13T13:11:37.592381-06:00","created_by":"daemon"}]}
{"id":"zine-h4i.5","title":"Implement deep linking from Home to filtered Library views","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:11:37.655819-06:00","updated_at":"2025-12-13T13:11:37.655819-06:00","dependencies":[{"issue_id":"zine-h4i.5","depends_on_id":"zine-h4i","type":"parent-child","created_at":"2025-12-13T13:11:37.656137-06:00","created_by":"daemon"}]}
{"id":"zine-hcb","title":"User Durable Object - SQLite Storage","description":"**DEPENDS ON: zine-shu (Worker Setup), zine-akb (Shared Package)**\n\nImplement the per-user Durable Object with SQLite storage, schema migrations, and internal request routing for Replicache push/pull operations.\n\n## Why This Matters\nThe UserDO is the **authoritative server** for each user's data. It handles all Replicache mutations and generates pull responses. This is the core of the sync architecture.\n\n## Implementation Details\n\n### SQLite Schema (Full)\n```sql\n-- Canonical items (content metadata)\nCREATE TABLE canonical_items (\n  id TEXT PRIMARY KEY,\n  content_type TEXT NOT NULL,\n  provider TEXT NOT NULL,\n  provider_id TEXT,\n  canonical_url TEXT NOT NULL,\n  title TEXT,\n  summary TEXT,\n  author TEXT,\n  publisher TEXT,\n  published_at TEXT,\n  thumbnail_url TEXT,\n  duration INTEGER,\n  created_at TEXT NOT NULL,\n  updated_at TEXT NOT NULL\n);\n\n-- User's relationship to items\nCREATE TABLE user_items (\n  id TEXT PRIMARY KEY,\n  item_id TEXT NOT NULL REFERENCES canonical_items(id),\n  state TEXT NOT NULL DEFAULT 'INBOX',\n  ingested_at TEXT NOT NULL,\n  bookmarked_at TEXT,\n  archived_at TEXT,\n  UNIQUE(item_id)\n);\n\n-- User's subscriptions\nCREATE TABLE sources (\n  id TEXT PRIMARY KEY,\n  provider TEXT NOT NULL,\n  external_id TEXT NOT NULL,\n  name TEXT NOT NULL,\n  enabled INTEGER NOT NULL DEFAULT 1,\n  created_at TEXT NOT NULL,\n  UNIQUE(provider, external_id)\n);\n\n-- Ingestion idempotency\nCREATE TABLE provider_items_seen (\n  id TEXT PRIMARY KEY,\n  provider TEXT NOT NULL,\n  provider_item_id TEXT NOT NULL,\n  source_id TEXT,\n  first_seen_at TEXT NOT NULL,\n  UNIQUE(provider, provider_item_id)\n);\n\n-- Replicache client tracking\nCREATE TABLE replicache_clients (\n  id TEXT PRIMARY KEY,\n  client_group_id TEXT NOT NULL,\n  last_mutation_id INTEGER NOT NULL DEFAULT 0,\n  updated_at TEXT NOT NULL\n);\n\n-- Replicache version tracking\nCREATE TABLE replicache_meta (\n  key TEXT PRIMARY KEY,\n  value TEXT NOT NULL\n);\n```\n\n### UserDO Class Structure\n```typescript\nexport class UserDO implements DurableObject {\n  private sql: SqlStorage;\n  private state: DurableObjectState;\n  \n  constructor(state: DurableObjectState) {\n    this.state = state;\n    this.sql = state.storage.sql;\n    this.runMigrations();\n  }\n  \n  async fetch(request: Request): Promise\u003cResponse\u003e {\n    const url = new URL(request.url);\n    \n    switch (url.pathname) {\n      case '/push':\n        return this.handlePush(request);\n      case '/pull':\n        return this.handlePull(request);\n      case '/ingest':\n        return this.handleIngest(request);\n      default:\n        return new Response('Not found', { status: 404 });\n    }\n  }\n  \n  private async handlePush(request: Request): Promise\u003cResponse\u003e {\n    // Process mutations, update lastMutationID\n    // See Replicache docs for protocol\n  }\n  \n  private async handlePull(request: Request): Promise\u003cResponse\u003e {\n    // Generate patches since client's cookie\n    // Return { cookie, lastMutationIDChanges, patch }\n  }\n  \n  async alarm(): Promise\u003cvoid\u003e {\n    // Handle scheduled tasks (e.g., source refresh)\n  }\n}\n```\n\n### Replicache Push Handler Logic\n1. Parse PushRequest with mutations array\n2. For each mutation:\n   - Check if mutation ID \u003e client's lastMutationID\n   - Execute mutation (bookmarkItem, archiveItem, etc.)\n   - Update client's lastMutationID\n3. Return success\n\n### Replicache Pull Handler Logic\n1. Parse PullRequest with cookie (version number)\n2. Query all rows modified since cookie version\n3. Generate patch operations (put/del)\n4. Return { cookie: newVersion, patch, lastMutationIDChanges }\n\n## Parallelization\n- Task 1 (UserDO class shell) must complete first\n- Task 2 (SQLite schema) can run with task 1\n- Tasks 3-4 (push/pull handlers) can run IN PARALLEL after 1-2\n- Task 5 (alarm support) can run independently\n- Task 6 (tests) runs last\n\n## Key Files\n- `apps/worker/src/durable-objects/user-do.ts`\n- `apps/worker/src/durable-objects/user-do.test.ts`\n\n## Acceptance Criteria\n- [ ] DO initializes with SQLite tables\n- [ ] Push endpoint accepts mutations and updates state\n- [ ] Pull endpoint returns correct patches\n- [ ] Client lastMutationID tracking works correctly","status":"open","priority":0,"issue_type":"epic","created_at":"2025-12-13T13:11:09.273723-06:00","updated_at":"2025-12-13T13:15:41.839108-06:00"}
{"id":"zine-hcb.1","title":"Create UserDO class with SQLite initialization","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:09.337848-06:00","updated_at":"2025-12-13T13:11:09.337848-06:00","dependencies":[{"issue_id":"zine-hcb.1","depends_on_id":"zine-hcb","type":"parent-child","created_at":"2025-12-13T13:11:09.338149-06:00","created_by":"daemon"}]}
{"id":"zine-hcb.2","title":"Define SQLite schema (canonical_items, user_items, sources, provider_items_seen)","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:09.401318-06:00","updated_at":"2025-12-13T13:11:09.401318-06:00","dependencies":[{"issue_id":"zine-hcb.2","depends_on_id":"zine-hcb","type":"parent-child","created_at":"2025-12-13T13:11:09.401634-06:00","created_by":"daemon"}]}
{"id":"zine-hcb.3","title":"Implement DO-internal push handler (process mutations)","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:09.465249-06:00","updated_at":"2025-12-13T13:11:09.465249-06:00","dependencies":[{"issue_id":"zine-hcb.3","depends_on_id":"zine-hcb","type":"parent-child","created_at":"2025-12-13T13:11:09.465545-06:00","created_by":"daemon"}]}
{"id":"zine-hcb.4","title":"Implement DO-internal pull handler (generate patches)","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:09.528531-06:00","updated_at":"2025-12-13T13:11:09.528531-06:00","dependencies":[{"issue_id":"zine-hcb.4","depends_on_id":"zine-hcb","type":"parent-child","created_at":"2025-12-13T13:11:09.528822-06:00","created_by":"daemon"}]}
{"id":"zine-hcb.5","title":"Add DO alarm support for scheduled tasks","description":"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-13T13:11:09.59083-06:00","updated_at":"2025-12-13T13:11:09.59083-06:00","dependencies":[{"issue_id":"zine-hcb.5","depends_on_id":"zine-hcb","type":"parent-child","created_at":"2025-12-13T13:11:09.591153-06:00","created_by":"daemon"}]}
{"id":"zine-hcb.6","title":"Write UserDO integration tests","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:11:09.652359-06:00","updated_at":"2025-12-13T13:11:09.652359-06:00","dependencies":[{"issue_id":"zine-hcb.6","depends_on_id":"zine-hcb","type":"parent-child","created_at":"2025-12-13T13:11:09.652698-06:00","created_by":"daemon"}]}
{"id":"zine-m6a","title":"Spotify Provider Integration","description":"Implement the Spotify provider for fetching podcast episodes via Spotify API.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-13T13:11:56.857825-06:00","updated_at":"2025-12-13T13:13:25.109022-06:00","closed_at":"2025-12-13T13:13:25.109022-06:00"}
{"id":"zine-m6a.1","title":"Create Spotify provider fetcher","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:11:56.923138-06:00","updated_at":"2025-12-13T13:11:56.923138-06:00","dependencies":[{"issue_id":"zine-m6a.1","depends_on_id":"zine-m6a","type":"parent-child","created_at":"2025-12-13T13:11:56.923433-06:00","created_by":"daemon"}]}
{"id":"zine-m6a.2","title":"Implement podcast episode fetching via API","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:11:56.986318-06:00","updated_at":"2025-12-13T13:11:56.986318-06:00","dependencies":[{"issue_id":"zine-m6a.2","depends_on_id":"zine-m6a","type":"parent-child","created_at":"2025-12-13T13:11:56.98661-06:00","created_by":"daemon"}]}
{"id":"zine-m6a.3","title":"Map Spotify API response to raw envelope format","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:11:57.04954-06:00","updated_at":"2025-12-13T13:11:57.04954-06:00","dependencies":[{"issue_id":"zine-m6a.3","depends_on_id":"zine-m6a","type":"parent-child","created_at":"2025-12-13T13:11:57.049849-06:00","created_by":"daemon"}]}
{"id":"zine-m6a.4","title":"Handle Spotify OAuth token refresh","description":"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-13T13:11:57.113386-06:00","updated_at":"2025-12-13T13:11:57.113386-06:00","dependencies":[{"issue_id":"zine-m6a.4","depends_on_id":"zine-m6a","type":"parent-child","created_at":"2025-12-13T13:11:57.11369-06:00","created_by":"daemon"}]}
{"id":"zine-m6a.5","title":"Write Spotify provider tests","description":"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-13T13:11:57.175397-06:00","updated_at":"2025-12-13T13:11:57.175397-06:00","dependencies":[{"issue_id":"zine-m6a.5","depends_on_id":"zine-m6a","type":"parent-child","created_at":"2025-12-13T13:11:57.175705-06:00","created_by":"daemon"}]}
{"id":"zine-phq","title":"Clerk Authentication Integration","description":"**DEPENDS ON: zine-shu (Worker Setup), zine-hcb (UserDO)**\n\nIntegrate Clerk for authentication on both mobile and worker, including webhook handlers for user lifecycle events.\n\n## Why This Matters\nClerk handles all authentication complexity. The webhook handlers ensure that when a user signs up, their UserDO is provisioned and ready for sync.\n\n## Implementation Details\n\n### Webhook Handler (routes/auth.ts)\n```typescript\nimport { Hono } from 'hono';\nimport { Webhook } from 'svix';\n\nconst auth = new Hono\u003c{ Bindings: Bindings }\u003e();\n\n// POST /api/auth/webhook\nauth.post('/webhook', async (c) =\u003e {\n  const svixId = c.req.header('svix-id');\n  const svixTimestamp = c.req.header('svix-timestamp');\n  const svixSignature = c.req.header('svix-signature');\n  \n  if (!svixId || !svixTimestamp || !svixSignature) {\n    return c.json({ error: 'Missing headers' }, 400);\n  }\n  \n  const body = await c.req.text();\n  const wh = new Webhook(c.env.CLERK_WEBHOOK_SECRET);\n  \n  let event;\n  try {\n    event = wh.verify(body, {\n      'svix-id': svixId,\n      'svix-timestamp': svixTimestamp,\n      'svix-signature': svixSignature,\n    });\n  } catch {\n    return c.json({ error: 'Invalid signature' }, 400);\n  }\n  \n  switch (event.type) {\n    case 'user.created':\n      await handleUserCreated(c.env, event.data);\n      break;\n    case 'user.deleted':\n      await handleUserDeleted(c.env, event.data);\n      break;\n  }\n  \n  return c.json({ received: true });\n});\n\nasync function handleUserCreated(env: Bindings, data: { id: string }) {\n  // Provision UserDO by making a simple request to it\n  const id = env.USER_DO.idFromName(data.id);\n  const stub = env.USER_DO.get(id);\n  \n  // Initialize the DO (creates tables)\n  await stub.fetch('http://do/init', { method: 'POST' });\n}\n\nasync function handleUserDeleted(env: Bindings, data: { id: string }) {\n  // UserDO cleanup - optionally delete all data\n  const id = env.USER_DO.idFromName(data.id);\n  const stub = env.USER_DO.get(id);\n  \n  await stub.fetch('http://do/cleanup', { method: 'POST' });\n}\n\nexport default auth;\n```\n\n### Mobile Clerk Helpers (apps/mobile/lib/auth.ts)\n```typescript\nimport { useAuth } from '@clerk/clerk-expo';\n\nexport function useAuthToken() {\n  const { getToken } = useAuth();\n  \n  return async () =\u003e {\n    const token = await getToken();\n    if (!token) throw new Error('Not authenticated');\n    return token;\n  };\n}\n\nexport function useUserId() {\n  const { userId } = useAuth();\n  return userId;\n}\n```\n\n### Clerk Provider Setup (apps/mobile/app/_layout.tsx)\n```typescript\nimport { ClerkProvider, ClerkLoaded } from '@clerk/clerk-expo';\nimport { tokenCache } from '../lib/auth';\n\nexport default function RootLayout() {\n  return (\n    \u003cClerkProvider\n      publishableKey={process.env.EXPO_PUBLIC_CLERK_PUBLISHABLE_KEY!}\n      tokenCache={tokenCache}\n    \u003e\n      \u003cClerkLoaded\u003e\n        {/* Rest of app */}\n      \u003c/ClerkLoaded\u003e\n    \u003c/ClerkProvider\u003e\n  );\n}\n```\n\n## Parallelization\n- Task 1 (webhook routes) can run independently\n- Tasks 2-3 (user.created, user.deleted handlers) can run IN PARALLEL\n- Task 4 (mobile helpers) can run IN PARALLEL with worker tasks\n\n## Key Files\n- `apps/worker/src/routes/auth.ts`\n- `apps/mobile/lib/auth.ts`\n\n## Acceptance Criteria\n- [ ] Webhook signature verification works\n- [ ] user.created provisions UserDO\n- [ ] user.deleted handles cleanup\n- [ ] Mobile can get auth tokens for API calls","status":"open","priority":0,"issue_type":"epic","created_at":"2025-12-13T13:11:15.794167-06:00","updated_at":"2025-12-13T13:16:07.546111-06:00"}
{"id":"zine-phq.1","title":"Create Clerk webhook handler routes","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:11:15.857616-06:00","updated_at":"2025-12-13T13:11:15.857616-06:00","dependencies":[{"issue_id":"zine-phq.1","depends_on_id":"zine-phq","type":"parent-child","created_at":"2025-12-13T13:11:15.858637-06:00","created_by":"daemon"}]}
{"id":"zine-phq.2","title":"Handle user.created webhook (provision UserDO)","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:11:15.924091-06:00","updated_at":"2025-12-13T13:11:15.924091-06:00","dependencies":[{"issue_id":"zine-phq.2","depends_on_id":"zine-phq","type":"parent-child","created_at":"2025-12-13T13:11:15.92438-06:00","created_by":"daemon"}]}
{"id":"zine-phq.3","title":"Handle user.deleted webhook (cleanup)","description":"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-13T13:11:15.988622-06:00","updated_at":"2025-12-13T13:11:15.988622-06:00","dependencies":[{"issue_id":"zine-phq.3","depends_on_id":"zine-phq","type":"parent-child","created_at":"2025-12-13T13:11:15.988943-06:00","created_by":"daemon"}]}
{"id":"zine-phq.4","title":"Create mobile Clerk auth helpers","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:16.053075-06:00","updated_at":"2025-12-13T13:11:16.053075-06:00","dependencies":[{"issue_id":"zine-phq.4","depends_on_id":"zine-phq","type":"parent-child","created_at":"2025-12-13T13:11:16.053381-06:00","created_by":"daemon"}]}
{"id":"zine-sg4","title":"RSS Provider Integration","description":"Implement the RSS provider for fetching and parsing RSS/Atom feeds.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-13T13:11:54.93944-06:00","updated_at":"2025-12-13T13:13:24.946823-06:00","closed_at":"2025-12-13T13:13:24.946823-06:00"}
{"id":"zine-sg4.1","title":"Create RSS provider fetcher","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:11:55.000938-06:00","updated_at":"2025-12-13T13:11:55.000938-06:00","dependencies":[{"issue_id":"zine-sg4.1","depends_on_id":"zine-sg4","type":"parent-child","created_at":"2025-12-13T13:11:55.001226-06:00","created_by":"daemon"}]}
{"id":"zine-sg4.2","title":"Implement RSS/Atom feed parsing","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:11:55.063679-06:00","updated_at":"2025-12-13T13:11:55.063679-06:00","dependencies":[{"issue_id":"zine-sg4.2","depends_on_id":"zine-sg4","type":"parent-child","created_at":"2025-12-13T13:11:55.064008-06:00","created_by":"daemon"}]}
{"id":"zine-sg4.3","title":"Map feed items to raw envelope format","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:11:55.127239-06:00","updated_at":"2025-12-13T13:11:55.127239-06:00","dependencies":[{"issue_id":"zine-sg4.3","depends_on_id":"zine-sg4","type":"parent-child","created_at":"2025-12-13T13:11:55.127556-06:00","created_by":"daemon"}]}
{"id":"zine-sg4.4","title":"Handle feed fetch errors gracefully","description":"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-13T13:11:55.193367-06:00","updated_at":"2025-12-13T13:11:55.193367-06:00","dependencies":[{"issue_id":"zine-sg4.4","depends_on_id":"zine-sg4","type":"parent-child","created_at":"2025-12-13T13:11:55.193661-06:00","created_by":"daemon"}]}
{"id":"zine-sg4.5","title":"Write RSS provider tests","description":"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-13T13:11:55.256425-06:00","updated_at":"2025-12-13T13:11:55.256425-06:00","dependencies":[{"issue_id":"zine-sg4.5","depends_on_id":"zine-sg4","type":"parent-child","created_at":"2025-12-13T13:11:55.256752-06:00","created_by":"daemon"}]}
{"id":"zine-sgd","title":"Base UI Components","description":"**DEPENDS ON: zine-vnf (Expo Setup)**\n\nCreate reusable base UI components using HeroUI Native and Uniwind styling.\n\n## Why This Matters\nThese components are the building blocks for all feature screens. Creating them first ensures visual consistency and reduces duplication.\n\n## Implementation Details\n\n### Button Component (components/ui/Button.tsx)\n```typescript\nimport { Button as HeroButton, ButtonProps } from 'heroui-native';\nimport { tv } from 'tailwind-variants';\n\nconst buttonVariants = tv({\n  base: 'rounded-lg',\n  variants: {\n    variant: {\n      primary: 'bg-blue-600',\n      secondary: 'bg-gray-200',\n      ghost: 'bg-transparent',\n    },\n    size: {\n      sm: 'px-3 py-1.5',\n      md: 'px-4 py-2',\n      lg: 'px-6 py-3',\n    },\n  },\n  defaultVariants: {\n    variant: 'primary',\n    size: 'md',\n  },\n});\n\ninterface Props extends ButtonProps {\n  variant?: 'primary' | 'secondary' | 'ghost';\n  size?: 'sm' | 'md' | 'lg';\n}\n\nexport function Button({ variant, size, className, ...props }: Props) {\n  return (\n    \u003cHeroButton\n      className={buttonVariants({ variant, size, className })}\n      {...props}\n    /\u003e\n  );\n}\n```\n\n### Card Component (components/ui/Card.tsx)\n```typescript\nimport { View, ViewProps } from 'react-native';\nimport { tv } from 'tailwind-variants';\n\nconst cardVariants = tv({\n  base: 'bg-white rounded-xl shadow-sm border border-gray-100 p-4',\n  variants: {\n    variant: {\n      default: '',\n      elevated: 'shadow-md',\n      outlined: 'shadow-none border-gray-200',\n    },\n  },\n  defaultVariants: {\n    variant: 'default',\n  },\n});\n\ninterface Props extends ViewProps {\n  variant?: 'default' | 'elevated' | 'outlined';\n}\n\nexport function Card({ variant, style, children, ...props }: Props) {\n  return (\n    \u003cView className={cardVariants({ variant })} style={style} {...props}\u003e\n      {children}\n    \u003c/View\u003e\n  );\n}\n```\n\n### Input Component (components/ui/Input.tsx)\n```typescript\nimport { TextInput, TextInputProps, View, Text } from 'react-native';\nimport { tv } from 'tailwind-variants';\n\nconst inputVariants = tv({\n  base: 'bg-gray-50 border border-gray-200 rounded-lg px-4 py-3 text-base',\n  variants: {\n    state: {\n      default: 'border-gray-200',\n      focused: 'border-blue-500',\n      error: 'border-red-500',\n    },\n  },\n});\n\ninterface Props extends TextInputProps {\n  label?: string;\n  error?: string;\n}\n\nexport function Input({ label, error, ...props }: Props) {\n  return (\n    \u003cView className=\"gap-1.5\"\u003e\n      {label \u0026\u0026 \u003cText className=\"text-sm font-medium text-gray-700\"\u003e{label}\u003c/Text\u003e}\n      \u003cTextInput\n        className={inputVariants({ state: error ? 'error' : 'default' })}\n        placeholderTextColor=\"#9CA3AF\"\n        {...props}\n      /\u003e\n      {error \u0026\u0026 \u003cText className=\"text-sm text-red-500\"\u003e{error}\u003c/Text\u003e}\n    \u003c/View\u003e\n  );\n}\n```\n\n### SearchBar Component (components/ui/SearchBar.tsx)\n```typescript\nimport { View, TextInput } from 'react-native';\nimport { MagnifyingGlassIcon, XMarkIcon } from 'react-native-heroicons/outline';\nimport { Pressable } from 'heroui-native';\n\ninterface Props {\n  value: string;\n  onChangeText: (text: string) =\u003e void;\n  placeholder?: string;\n}\n\nexport function SearchBar({ value, onChangeText, placeholder = 'Search...' }: Props) {\n  return (\n    \u003cView className=\"flex-row items-center bg-gray-100 rounded-lg px-3 py-2\"\u003e\n      \u003cMagnifyingGlassIcon size={20} color=\"#6B7280\" /\u003e\n      \u003cTextInput\n        className=\"flex-1 ml-2 text-base\"\n        value={value}\n        onChangeText={onChangeText}\n        placeholder={placeholder}\n        placeholderTextColor=\"#9CA3AF\"\n      /\u003e\n      {value.length \u003e 0 \u0026\u0026 (\n        \u003cPressable onPress={() =\u003e onChangeText('')}\u003e\n          \u003cXMarkIcon size={20} color=\"#6B7280\" /\u003e\n        \u003c/Pressable\u003e\n      )}\n    \u003c/View\u003e\n  );\n}\n```\n\n### FilterChip Component (components/ui/FilterChip.tsx)\n```typescript\nimport { Pressable, Text } from 'react-native';\nimport { tv } from 'tailwind-variants';\n\nconst chipVariants = tv({\n  base: 'rounded-full px-4 py-2',\n  variants: {\n    selected: {\n      true: 'bg-blue-600',\n      false: 'bg-gray-100',\n    },\n  },\n});\n\nconst textVariants = tv({\n  base: 'text-sm font-medium',\n  variants: {\n    selected: {\n      true: 'text-white',\n      false: 'text-gray-700',\n    },\n  },\n});\n\ninterface Props {\n  label: string;\n  selected: boolean;\n  onPress: () =\u003e void;\n}\n\nexport function FilterChip({ label, selected, onPress }: Props) {\n  return (\n    \u003cPressable className={chipVariants({ selected })} onPress={onPress}\u003e\n      \u003cText className={textVariants({ selected })}\u003e{label}\u003c/Text\u003e\n    \u003c/Pressable\u003e\n  );\n}\n```\n\n### EmptyState Component (components/ui/EmptyState.tsx)\n```typescript\nimport { View, Text } from 'react-native';\nimport { ReactNode } from 'react';\n\ninterface Props {\n  icon?: ReactNode;\n  title: string;\n  description?: string;\n  action?: ReactNode;\n}\n\nexport function EmptyState({ icon, title, description, action }: Props) {\n  return (\n    \u003cView className=\"flex-1 items-center justify-center p-8\"\u003e\n      {icon \u0026\u0026 \u003cView className=\"mb-4\"\u003e{icon}\u003c/View\u003e}\n      \u003cText className=\"text-xl font-semibold text-gray-900 text-center\"\u003e{title}\u003c/Text\u003e\n      {description \u0026\u0026 (\n        \u003cText className=\"mt-2 text-base text-gray-500 text-center\"\u003e{description}\u003c/Text\u003e\n      )}\n      {action \u0026\u0026 \u003cView className=\"mt-6\"\u003e{action}\u003c/View\u003e}\n    \u003c/View\u003e\n  );\n}\n```\n\n## Parallelization\nALL tasks can run IN PARALLEL - they are independent components.\n\n## Key Files\n- `apps/mobile/components/ui/Button.tsx`\n- `apps/mobile/components/ui/Card.tsx`\n- `apps/mobile/components/ui/Input.tsx`\n- `apps/mobile/components/ui/SearchBar.tsx`\n- `apps/mobile/components/ui/FilterChip.tsx`\n- `apps/mobile/components/ui/EmptyState.tsx`\n- `apps/mobile/components/ui/index.ts` (barrel export)\n\n## Acceptance Criteria\n- [ ] All components render correctly\n- [ ] Uniwind styling works with tailwind-variants\n- [ ] Components are properly typed with TypeScript\n- [ ] Components can be imported from `@/components/ui`","status":"open","priority":0,"issue_type":"epic","created_at":"2025-12-13T13:11:42.998523-06:00","updated_at":"2025-12-13T13:17:20.262865-06:00"}
{"id":"zine-sgd.1","title":"Create Button component","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:43.063897-06:00","updated_at":"2025-12-13T13:11:43.063897-06:00","dependencies":[{"issue_id":"zine-sgd.1","depends_on_id":"zine-sgd","type":"parent-child","created_at":"2025-12-13T13:11:43.06422-06:00","created_by":"daemon"}]}
{"id":"zine-sgd.2","title":"Create Card component","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:43.128076-06:00","updated_at":"2025-12-13T13:11:43.128076-06:00","dependencies":[{"issue_id":"zine-sgd.2","depends_on_id":"zine-sgd","type":"parent-child","created_at":"2025-12-13T13:11:43.128371-06:00","created_by":"daemon"}]}
{"id":"zine-sgd.3","title":"Create Input component","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:11:43.191022-06:00","updated_at":"2025-12-13T13:11:43.191022-06:00","dependencies":[{"issue_id":"zine-sgd.3","depends_on_id":"zine-sgd","type":"parent-child","created_at":"2025-12-13T13:11:43.191326-06:00","created_by":"daemon"}]}
{"id":"zine-sgd.4","title":"Create SearchBar component","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:11:43.253976-06:00","updated_at":"2025-12-13T13:11:43.253976-06:00","dependencies":[{"issue_id":"zine-sgd.4","depends_on_id":"zine-sgd","type":"parent-child","created_at":"2025-12-13T13:11:43.254248-06:00","created_by":"daemon"}]}
{"id":"zine-sgd.5","title":"Create FilterChip component","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:11:43.317777-06:00","updated_at":"2025-12-13T13:11:43.317777-06:00","dependencies":[{"issue_id":"zine-sgd.5","depends_on_id":"zine-sgd","type":"parent-child","created_at":"2025-12-13T13:11:43.318087-06:00","created_by":"daemon"}]}
{"id":"zine-sgd.6","title":"Create EmptyState component","description":"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-13T13:11:43.381084-06:00","updated_at":"2025-12-13T13:11:43.381084-06:00","dependencies":[{"issue_id":"zine-sgd.6","depends_on_id":"zine-sgd","type":"parent-child","created_at":"2025-12-13T13:11:43.381387-06:00","created_by":"daemon"}]}
{"id":"zine-shu","title":"Cloudflare Worker Backend - Core Setup","description":"**DEPENDS ON: zine-un1 (Monorepo Setup), zine-akb (Shared Package)**\n\nSet up the Cloudflare Workers backend with Hono, configure wrangler.toml with Durable Object bindings, and establish the basic API structure.\n\n## Implementation Details\n\n### wrangler.toml Configuration\n```toml\nname = \"zine-worker\"\nmain = \"src/index.ts\"\ncompatibility_date = \"2024-01-01\"\n\n[[durable_objects.bindings]]\nname = \"USER_DO\"\nclass_name = \"UserDO\"\n\n[[migrations]]\ntag = \"v1\"\nnew_sqlite_classes = [\"UserDO\"]\n\n[env.staging]\nname = \"zine-worker-staging\"\n\n[env.production]\nname = \"zine-worker-production\"\n```\n\n### Hono App Entry Point (src/index.ts)\n```typescript\nimport { Hono } from 'hono';\nimport { cors } from 'hono/cors';\nimport { logger } from 'hono/logger';\nimport { authMiddleware } from './middleware/auth';\nimport syncRoutes from './routes/sync';\nimport authRoutes from './routes/auth';\nimport sourcesRoutes from './routes/sources';\n\nexport { UserDO } from './durable-objects/user-do';\n\ntype Bindings = {\n  USER_DO: DurableObjectNamespace;\n  CLERK_SECRET_KEY: string;\n  CLERK_PUBLISHABLE_KEY: string;\n};\n\nconst app = new Hono\u003c{ Bindings: Bindings }\u003e();\n\napp.use('*', logger());\napp.use('*', cors());\n\napp.route('/api/replicache', syncRoutes);\napp.route('/api/auth', authRoutes);\napp.route('/api/sources', sourcesRoutes);\n\napp.get('/health', (c) =\u003e c.json({ status: 'ok' }));\n\nexport default app;\n```\n\n### SQLite Helper Utilities (lib/db.ts)\n```typescript\nexport function runMigrations(sql: SqlStorage) {\n  sql.exec(`\n    CREATE TABLE IF NOT EXISTS canonical_items (...);\n    CREATE TABLE IF NOT EXISTS user_items (...);\n    CREATE TABLE IF NOT EXISTS sources (...);\n    CREATE TABLE IF NOT EXISTS provider_items_seen (...);\n    CREATE TABLE IF NOT EXISTS replicache_clients (...);\n    CREATE TABLE IF NOT EXISTS replicache_mutations (...);\n  `);\n}\n```\n\n### Auth Middleware (middleware/auth.ts)\n```typescript\nimport { MiddlewareHandler } from 'hono';\nimport { verifyClerkToken } from '../lib/auth';\n\nexport const authMiddleware: MiddlewareHandler = async (c, next) =\u003e {\n  const authHeader = c.req.header('Authorization');\n  if (!authHeader?.startsWith('Bearer ')) {\n    return c.json({ error: 'Unauthorized' }, 401);\n  }\n  \n  const token = authHeader.slice(7);\n  const payload = await verifyClerkToken(token, c.env.CLERK_SECRET_KEY);\n  \n  if (!payload) {\n    return c.json({ error: 'Invalid token' }, 401);\n  }\n  \n  c.set('userId', payload.sub);\n  await next();\n};\n```\n\n## Parallelization\n- Tasks 1-3 (Hono init, wrangler config, SQLite helpers) should run SEQUENTIALLY\n- Tasks 4-5 (auth helpers, auth middleware) can run IN PARALLEL\n- Task 6 (Vitest config) can run after tasks 1-2\n\n## Key Files to Create\n- `apps/worker/src/index.ts`\n- `apps/worker/src/lib/db.ts`\n- `apps/worker/src/lib/auth.ts`\n- `apps/worker/src/middleware/auth.ts`\n- `apps/worker/wrangler.toml`\n- `apps/worker/tsconfig.json`\n- `apps/worker/vitest.config.ts`\n- `apps/worker/package.json`\n\n## Acceptance Criteria\n- [ ] `wrangler dev` starts successfully\n- [ ] `/health` endpoint returns 200\n- [ ] Vitest runs (even with no tests)\n- [ ] TypeScript compiles without errors","status":"open","priority":0,"issue_type":"epic","created_at":"2025-12-13T13:11:04.656227-06:00","updated_at":"2025-12-13T13:15:20.873553-06:00"}
{"id":"zine-shu.1","title":"Initialize Hono app entry point","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:04.720586-06:00","updated_at":"2025-12-13T13:11:04.720586-06:00","dependencies":[{"issue_id":"zine-shu.1","depends_on_id":"zine-shu","type":"parent-child","created_at":"2025-12-13T13:11:04.720894-06:00","created_by":"daemon"}]}
{"id":"zine-shu.2","title":"Configure wrangler.toml with DO bindings and environments","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:04.783615-06:00","updated_at":"2025-12-13T13:11:04.783615-06:00","dependencies":[{"issue_id":"zine-shu.2","depends_on_id":"zine-shu","type":"parent-child","created_at":"2025-12-13T13:11:04.783933-06:00","created_by":"daemon"}]}
{"id":"zine-shu.3","title":"Create SQLite helper utilities for DO","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:04.847162-06:00","updated_at":"2025-12-13T13:11:04.847162-06:00","dependencies":[{"issue_id":"zine-shu.3","depends_on_id":"zine-shu","type":"parent-child","created_at":"2025-12-13T13:11:04.847466-06:00","created_by":"daemon"}]}
{"id":"zine-shu.4","title":"Create Clerk auth token validation helpers","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:11:04.9096-06:00","updated_at":"2025-12-13T13:11:04.9096-06:00","dependencies":[{"issue_id":"zine-shu.4","depends_on_id":"zine-shu","type":"parent-child","created_at":"2025-12-13T13:11:04.909923-06:00","created_by":"daemon"}]}
{"id":"zine-shu.5","title":"Create authentication middleware for Hono","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:11:04.97403-06:00","updated_at":"2025-12-13T13:11:04.97403-06:00","dependencies":[{"issue_id":"zine-shu.5","depends_on_id":"zine-shu","type":"parent-child","created_at":"2025-12-13T13:11:04.974354-06:00","created_by":"daemon"}]}
{"id":"zine-shu.6","title":"Set up Vitest configuration for Workers","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:11:05.037588-06:00","updated_at":"2025-12-13T13:11:05.037588-06:00","dependencies":[{"issue_id":"zine-shu.6","depends_on_id":"zine-shu","type":"parent-child","created_at":"2025-12-13T13:11:05.037896-06:00","created_by":"daemon"}]}
{"id":"zine-u91","title":"Mobile Navigation - Tab Structure","description":"**DEPENDS ON: zine-vnf (Expo Setup), zine-sgd (Base UI Components)**\n\nImplement the three-tab navigation structure (Home, Inbox, Library) using Expo Router with proper layouts.\n\n## Why This Matters\nThis defines the primary navigation model. The three tabs represent three distinct mental modes (re-entry, decision, recall) per the experience architecture.\n\n## Implementation Details\n\n### Tab Layout (app/(tabs)/_layout.tsx)\n```typescript\nimport { Tabs } from 'expo-router';\nimport { HomeIcon, InboxIcon, BookmarkIcon } from 'react-native-heroicons/outline';\nimport {\n  HomeIcon as HomeIconSolid,\n  InboxIcon as InboxIconSolid,\n  BookmarkIcon as BookmarkIconSolid,\n} from 'react-native-heroicons/solid';\n\nexport default function TabLayout() {\n  return (\n    \u003cTabs\n      screenOptions={{\n        tabBarActiveTintColor: '#0066FF',\n        tabBarInactiveTintColor: '#666666',\n        headerShown: false,\n        tabBarStyle: {\n          borderTopWidth: 1,\n          borderTopColor: '#E5E5E5',\n        },\n      }}\n    \u003e\n      \u003cTabs.Screen\n        name=\"index\"\n        options={{\n          title: 'Home',\n          tabBarIcon: ({ focused, color, size }) =\u003e\n            focused ? (\n              \u003cHomeIconSolid color={color} size={size} /\u003e\n            ) : (\n              \u003cHomeIcon color={color} size={size} /\u003e\n            ),\n        }}\n      /\u003e\n      \u003cTabs.Screen\n        name=\"inbox\"\n        options={{\n          title: 'Inbox',\n          tabBarIcon: ({ focused, color, size }) =\u003e\n            focused ? (\n              \u003cInboxIconSolid color={color} size={size} /\u003e\n            ) : (\n              \u003cInboxIcon color={color} size={size} /\u003e\n            ),\n        }}\n      /\u003e\n      \u003cTabs.Screen\n        name=\"library\"\n        options={{\n          title: 'Library',\n          tabBarIcon: ({ focused, color, size }) =\u003e\n            focused ? (\n              \u003cBookmarkIconSolid color={color} size={size} /\u003e\n            ) : (\n              \u003cBookmarkIcon color={color} size={size} /\u003e\n            ),\n        }}\n      /\u003e\n    \u003c/Tabs\u003e\n  );\n}\n```\n\n### Home Tab Stub (app/(tabs)/index.tsx)\n```typescript\nimport { View, Text } from 'react-native';\nimport { SafeAreaView } from 'react-native-safe-area-context';\n\nexport default function HomeScreen() {\n  return (\n    \u003cSafeAreaView style={{ flex: 1 }}\u003e\n      \u003cView style={{ flex: 1, padding: 16 }}\u003e\n        \u003cText style={{ fontSize: 28, fontWeight: 'bold' }}\u003eHome\u003c/Text\u003e\n        {/* RecentBookmarks, content type shortcuts will be added in Home epic */}\n      \u003c/View\u003e\n    \u003c/SafeAreaView\u003e\n  );\n}\n```\n\n### Inbox Tab Stub (app/(tabs)/inbox.tsx)\n```typescript\nimport { View, Text } from 'react-native';\nimport { SafeAreaView } from 'react-native-safe-area-context';\n\nexport default function InboxScreen() {\n  return (\n    \u003cSafeAreaView style={{ flex: 1 }}\u003e\n      \u003cView style={{ flex: 1, padding: 16 }}\u003e\n        \u003cText style={{ fontSize: 28, fontWeight: 'bold' }}\u003eInbox\u003c/Text\u003e\n        {/* InboxList, filters will be added in Inbox epic */}\n      \u003c/View\u003e\n    \u003c/SafeAreaView\u003e\n  );\n}\n```\n\n### Library Tab Stub (app/(tabs)/library.tsx)\n```typescript\nimport { View, Text } from 'react-native';\nimport { SafeAreaView } from 'react-native-safe-area-context';\n\nexport default function LibraryScreen() {\n  return (\n    \u003cSafeAreaView style={{ flex: 1 }}\u003e\n      \u003cView style={{ flex: 1, padding: 16 }}\u003e\n        \u003cText style={{ fontSize: 28, fontWeight: 'bold' }}\u003eLibrary\u003c/Text\u003e\n        {/* LibraryList, search, filters will be added in Library epic */}\n      \u003c/View\u003e\n    \u003c/SafeAreaView\u003e\n  );\n}\n```\n\n### Tab Icons with Heroicons\nInstall and configure react-native-heroicons:\n```bash\nbun add react-native-heroicons react-native-svg\n```\n\nBoth outline and solid variants are needed for active/inactive states.\n\n## Parallelization\n- Task 1 (tab layout) must complete first\n- Tasks 2-4 (Home, Inbox, Library screens) can run IN PARALLEL\n- Task 5 (configure icons) can run with task 1\n\n## Key Files\n- `apps/mobile/app/(tabs)/_layout.tsx`\n- `apps/mobile/app/(tabs)/index.tsx`\n- `apps/mobile/app/(tabs)/inbox.tsx`\n- `apps/mobile/app/(tabs)/library.tsx`\n\n## Acceptance Criteria\n- [ ] Three tabs appear at bottom of screen\n- [ ] Tapping tabs navigates between screens\n- [ ] Active/inactive icon states work correctly\n- [ ] Safe area is respected on all screens","status":"open","priority":0,"issue_type":"epic","created_at":"2025-12-13T13:11:26.433758-06:00","updated_at":"2025-12-13T13:17:01.091346-06:00"}
{"id":"zine-u91.1","title":"Create tab navigator layout","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:26.500327-06:00","updated_at":"2025-12-13T13:11:26.500327-06:00","dependencies":[{"issue_id":"zine-u91.1","depends_on_id":"zine-u91","type":"parent-child","created_at":"2025-12-13T13:11:26.500668-06:00","created_by":"daemon"}]}
{"id":"zine-u91.2","title":"Create Home tab screen (re-entry \u0026 discovery)","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:26.565025-06:00","updated_at":"2025-12-13T13:11:26.565025-06:00","dependencies":[{"issue_id":"zine-u91.2","depends_on_id":"zine-u91","type":"parent-child","created_at":"2025-12-13T13:11:26.565319-06:00","created_by":"daemon"}]}
{"id":"zine-u91.3","title":"Create Inbox tab screen (decision queue)","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:26.630631-06:00","updated_at":"2025-12-13T13:11:26.630631-06:00","dependencies":[{"issue_id":"zine-u91.3","depends_on_id":"zine-u91","type":"parent-child","created_at":"2025-12-13T13:11:26.630933-06:00","created_by":"daemon"}]}
{"id":"zine-u91.4","title":"Create Library tab screen (long-term memory)","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:26.696237-06:00","updated_at":"2025-12-13T13:11:26.696237-06:00","dependencies":[{"issue_id":"zine-u91.4","depends_on_id":"zine-u91","type":"parent-child","created_at":"2025-12-13T13:11:26.696555-06:00","created_by":"daemon"}]}
{"id":"zine-u91.5","title":"Configure tab icons with Heroicons","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:11:26.762036-06:00","updated_at":"2025-12-13T13:11:26.762036-06:00","dependencies":[{"issue_id":"zine-u91.5","depends_on_id":"zine-u91","type":"parent-child","created_at":"2025-12-13T13:11:26.762347-06:00","created_by":"daemon"}]}
{"id":"zine-un1","title":"Monorepo \u0026 Tooling Setup","description":"**FOUNDATION EPIC - START HERE**\n\nInitialize the Turborepo monorepo structure with Bun, configure workspaces, TypeScript base config, ESLint, and Prettier.\n\n## Why This Comes First\nAll other epics depend on this monorepo structure. No code can be written until this foundation exists.\n\n## Implementation Details\n\n### Directory Structure to Create\n```\nzine/\n apps/\n    mobile/          # Expo app (skeleton only)\n    worker/          # CF Workers backend (skeleton only)\n packages/\n    shared/          # Shared types, schemas, mutators\n turbo.json           # Turborepo pipeline config\n package.json         # Root workspaces config\n tsconfig.base.json   # Base TS config (strict mode)\n .eslintrc.js         # ESLint config\n .prettierrc          # Prettier config\n bun.lockb            # Bun lockfile\n```\n\n### turbo.json Configuration\n```json\n{\n  \"$schema\": \"https://turbo.build/schema.json\",\n  \"tasks\": {\n    \"build\": { \"dependsOn\": [\"^build\"], \"outputs\": [\"dist/**\"] },\n    \"dev\": { \"cache\": false, \"persistent\": true },\n    \"lint\": {},\n    \"typecheck\": { \"dependsOn\": [\"^build\"] },\n    \"test\": { \"dependsOn\": [\"^build\"] }\n  }\n}\n```\n\n### Root package.json Workspaces\n```json\n{\n  \"workspaces\": [\"apps/*\", \"packages/*\"],\n  \"scripts\": {\n    \"build\": \"turbo build\",\n    \"dev\": \"turbo dev\",\n    \"lint\": \"turbo lint\",\n    \"typecheck\": \"turbo typecheck\"\n  }\n}\n```\n\n## Parallelization\n- Tasks 1-4 (init, TS config, ESLint, Prettier) can run sequentially in one worker\n- Tasks 5-7 (workspace skeletons) can run IN PARALLEL after tasks 1-4 complete\n\n## Acceptance Criteria\n- [ ] `bun install` succeeds\n- [ ] `bun run build` succeeds (even if empty)\n- [ ] `bun run lint` succeeds\n- [ ] `bun run typecheck` succeeds\n- [ ] Each workspace has its own package.json with correct name","status":"open","priority":0,"issue_type":"epic","created_at":"2025-12-13T13:10:56.368362-06:00","updated_at":"2025-12-13T13:14:55.569443-06:00"}
{"id":"zine-un1.1","title":"Initialize Turborepo with Bun workspaces","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:10:56.433762-06:00","updated_at":"2025-12-13T13:10:56.433762-06:00","dependencies":[{"issue_id":"zine-un1.1","depends_on_id":"zine-un1","type":"parent-child","created_at":"2025-12-13T13:10:56.434221-06:00","created_by":"daemon"}]}
{"id":"zine-un1.2","title":"Create base TypeScript configuration","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:10:56.531809-06:00","updated_at":"2025-12-13T13:10:56.531809-06:00","dependencies":[{"issue_id":"zine-un1.2","depends_on_id":"zine-un1","type":"parent-child","created_at":"2025-12-13T13:10:56.532153-06:00","created_by":"daemon"}]}
{"id":"zine-un1.3","title":"Configure ESLint for monorepo","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:10:56.594947-06:00","updated_at":"2025-12-13T13:10:56.594947-06:00","dependencies":[{"issue_id":"zine-un1.3","depends_on_id":"zine-un1","type":"parent-child","created_at":"2025-12-13T13:10:56.595278-06:00","created_by":"daemon"}]}
{"id":"zine-un1.4","title":"Configure Prettier","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:10:56.659707-06:00","updated_at":"2025-12-13T13:10:56.659707-06:00","dependencies":[{"issue_id":"zine-un1.4","depends_on_id":"zine-un1","type":"parent-child","created_at":"2025-12-13T13:10:56.660043-06:00","created_by":"daemon"}]}
{"id":"zine-un1.5","title":"Create apps/mobile workspace skeleton","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:10:56.722029-06:00","updated_at":"2025-12-13T13:10:56.722029-06:00","dependencies":[{"issue_id":"zine-un1.5","depends_on_id":"zine-un1","type":"parent-child","created_at":"2025-12-13T13:10:56.722365-06:00","created_by":"daemon"}]}
{"id":"zine-un1.6","title":"Create apps/worker workspace skeleton","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:10:56.784842-06:00","updated_at":"2025-12-13T13:10:56.784842-06:00","dependencies":[{"issue_id":"zine-un1.6","depends_on_id":"zine-un1","type":"parent-child","created_at":"2025-12-13T13:10:56.785194-06:00","created_by":"daemon"}]}
{"id":"zine-un1.7","title":"Create packages/shared workspace skeleton","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:10:56.848863-06:00","updated_at":"2025-12-13T13:10:56.848863-06:00","dependencies":[{"issue_id":"zine-un1.7","depends_on_id":"zine-un1","type":"parent-child","created_at":"2025-12-13T13:10:56.849245-06:00","created_by":"daemon"}]}
{"id":"zine-vnf","title":"Expo Mobile App - Core Setup","description":"**DEPENDS ON: zine-un1 (Monorepo Setup)**\n\nInitialize the Expo SDK 54 mobile app with Expo Router, HeroUI Native, Uniwind styling, and required dependencies.\n\n## Why This Matters\nThis establishes the React Native foundation. All mobile UI work depends on this setup being correct - especially the complex HeroUI Native + Uniwind integration.\n\n## Implementation Details\n\n### Expo Initialization\n```bash\ncd apps/mobile\nbunx create-expo-app@latest . --template blank-typescript\n```\n\n### Required Dependencies\n```json\n{\n  \"dependencies\": {\n    \"expo\": \"~54.0.0\",\n    \"expo-router\": \"~4.0.0\",\n    \"react-native-screens\": \"~4.16.0\",\n    \"react-native-safe-area-context\": \"~5.6.0\",\n    \"react-native-reanimated\": \"~4.1.1\",\n    \"react-native-gesture-handler\": \"~2.22.1\",\n    \"react-native-svg\": \"15.12.1\",\n    \"@gorhom/bottom-sheet\": \"^5.0.0\",\n    \"heroui-native\": \"1.0.0-beta.8\",\n    \"uniwind\": \"^1.0.0\",\n    \"tailwind-variants\": \"^3.2.2\",\n    \"tailwind-merge\": \"^2.0.0\",\n    \"@clerk/clerk-expo\": \"^2.0.0\",\n    \"replicache\": \"^15.0.0\",\n    \"react-native-heroicons\": \"^4.0.0\"\n  }\n}\n```\n\n### Uniwind Configuration (tailwind.config.js)\n```javascript\n/** @type {import('tailwindcss').Config} */\nmodule.exports = {\n  content: ['./app/**/*.{js,jsx,ts,tsx}', './components/**/*.{js,jsx,ts,tsx}'],\n  presets: [require('uniwind/preset')],\n  theme: {\n    extend: {\n      colors: {\n        // Custom brand colors\n      },\n    },\n  },\n  plugins: [],\n};\n```\n\n### Root Layout Structure (app/_layout.tsx)\n```typescript\nimport { Stack } from 'expo-router';\nimport { ClerkProvider, ClerkLoaded } from '@clerk/clerk-expo';\nimport { HeroUIProvider } from 'heroui-native';\nimport { UniwindProvider } from 'uniwind';\nimport { GestureHandlerRootView } from 'react-native-gesture-handler';\nimport { SafeAreaProvider } from 'react-native-safe-area-context';\n\nexport default function RootLayout() {\n  return (\n    \u003cGestureHandlerRootView style={{ flex: 1 }}\u003e\n      \u003cSafeAreaProvider\u003e\n        \u003cClerkProvider publishableKey={process.env.EXPO_PUBLIC_CLERK_PUBLISHABLE_KEY!}\u003e\n          \u003cClerkLoaded\u003e\n            \u003cUniwindProvider\u003e\n              \u003cHeroUIProvider\u003e\n                \u003cStack screenOptions={{ headerShown: false }}\u003e\n                  \u003cStack.Screen name=\"(tabs)\" /\u003e\n                  \u003cStack.Screen name=\"item/[id]\" options={{ presentation: 'card' }} /\u003e\n                \u003c/Stack\u003e\n              \u003c/HeroUIProvider\u003e\n            \u003c/UniwindProvider\u003e\n          \u003c/ClerkLoaded\u003e\n        \u003c/ClerkProvider\u003e\n      \u003c/SafeAreaProvider\u003e\n    \u003c/GestureHandlerRootView\u003e\n  );\n}\n```\n\n### 404 Handler (app/+not-found.tsx)\n```typescript\nimport { Link, Stack } from 'expo-router';\nimport { View, Text } from 'react-native';\n\nexport default function NotFoundScreen() {\n  return (\n    \u003c\u003e\n      \u003cStack.Screen options={{ title: 'Oops!' }} /\u003e\n      \u003cView style={{ flex: 1, alignItems: 'center', justifyContent: 'center' }}\u003e\n        \u003cText\u003eThis screen doesn't exist.\u003c/Text\u003e\n        \u003cLink href=\"/\"\u003eGo home\u003c/Link\u003e\n      \u003c/View\u003e\n    \u003c/\u003e\n  );\n}\n```\n\n### Jest Configuration\n```javascript\n// jest.config.js\nmodule.exports = {\n  preset: 'jest-expo',\n  transformIgnorePatterns: [\n    'node_modules/(?!((jest-)?react-native|@react-native(-community)?)|expo(nent)?|@expo(nent)?/.*|@expo-google-fonts/.*|react-navigation|@react-navigation/.*|@unimodules/.*|unimodules|sentry-expo|native-base|react-native-svg|heroui-native|uniwind)',\n  ],\n  setupFilesAfterEnv: ['@testing-library/jest-native/extend-expect'],\n};\n```\n\n## Parallelization\n- Tasks 1-3 (Expo init, Uniwind config, HeroUI setup) must run SEQUENTIALLY\n- Task 4 (root layout) depends on 1-3\n- Task 5 (404 handler) can run IN PARALLEL with task 4\n- Task 6 (Jest setup) can run IN PARALLEL with tasks 4-5\n\n## Key Files\n- `apps/mobile/app/_layout.tsx`\n- `apps/mobile/app/+not-found.tsx`\n- `apps/mobile/tailwind.config.js`\n- `apps/mobile/app.json`\n- `apps/mobile/package.json`\n- `apps/mobile/tsconfig.json`\n- `apps/mobile/jest.config.js`\n\n## Acceptance Criteria\n- [ ] `bun run ios` / `bun run android` starts the app\n- [ ] Expo Router navigation works\n- [ ] HeroUI Native components render\n- [ ] Uniwind styles apply correctly\n- [ ] Jest runs (even with no tests)","status":"open","priority":0,"issue_type":"epic","created_at":"2025-12-13T13:11:20.234949-06:00","updated_at":"2025-12-13T13:16:29.774404-06:00"}
{"id":"zine-vnf.1","title":"Initialize Expo SDK 54 project","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:20.305757-06:00","updated_at":"2025-12-13T13:11:20.305757-06:00","dependencies":[{"issue_id":"zine-vnf.1","depends_on_id":"zine-vnf","type":"parent-child","created_at":"2025-12-13T13:11:20.30607-06:00","created_by":"daemon"}]}
{"id":"zine-vnf.2","title":"Configure Uniwind/Tailwind","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:20.376366-06:00","updated_at":"2025-12-13T13:11:20.376366-06:00","dependencies":[{"issue_id":"zine-vnf.2","depends_on_id":"zine-vnf","type":"parent-child","created_at":"2025-12-13T13:11:20.376664-06:00","created_by":"daemon"}]}
{"id":"zine-vnf.3","title":"Install and configure HeroUI Native with peer dependencies","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:20.444438-06:00","updated_at":"2025-12-13T13:11:20.444438-06:00","dependencies":[{"issue_id":"zine-vnf.3","depends_on_id":"zine-vnf","type":"parent-child","created_at":"2025-12-13T13:11:20.444728-06:00","created_by":"daemon"}]}
{"id":"zine-vnf.4","title":"Create root layout with Clerk and theme providers","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:20.51148-06:00","updated_at":"2025-12-13T13:11:20.51148-06:00","dependencies":[{"issue_id":"zine-vnf.4","depends_on_id":"zine-vnf","type":"parent-child","created_at":"2025-12-13T13:11:20.511776-06:00","created_by":"daemon"}]}
{"id":"zine-vnf.5","title":"Create 404 not-found handler","description":"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-13T13:11:20.574271-06:00","updated_at":"2025-12-13T13:11:20.574271-06:00","dependencies":[{"issue_id":"zine-vnf.5","depends_on_id":"zine-vnf","type":"parent-child","created_at":"2025-12-13T13:11:20.574582-06:00","created_by":"daemon"}]}
{"id":"zine-vnf.6","title":"Set up Jest for mobile testing","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:11:20.639462-06:00","updated_at":"2025-12-13T13:11:20.639462-06:00","dependencies":[{"issue_id":"zine-vnf.6","depends_on_id":"zine-vnf","type":"parent-child","created_at":"2025-12-13T13:11:20.639757-06:00","created_by":"daemon"}]}
{"id":"zine-wmu","title":"Library Feature - UI \u0026 Logic","description":"Build the Library screen for browsing bookmarked content with filtering and search capabilities.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-13T13:11:33.790108-06:00","updated_at":"2025-12-13T13:13:21.235595-06:00","closed_at":"2025-12-13T13:13:21.235595-06:00"}
{"id":"zine-wmu.1","title":"Create LibraryItem component","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:33.856683-06:00","updated_at":"2025-12-13T13:11:33.856683-06:00","dependencies":[{"issue_id":"zine-wmu.1","depends_on_id":"zine-wmu","type":"parent-child","created_at":"2025-12-13T13:11:33.857029-06:00","created_by":"daemon"}]}
{"id":"zine-wmu.2","title":"Create LibraryList component with virtualization","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:33.923195-06:00","updated_at":"2025-12-13T13:11:33.923195-06:00","dependencies":[{"issue_id":"zine-wmu.2","depends_on_id":"zine-wmu","type":"parent-child","created_at":"2025-12-13T13:11:33.923504-06:00","created_by":"daemon"}]}
{"id":"zine-wmu.3","title":"Create LibraryFilters component (provider, content type)","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:11:33.988842-06:00","updated_at":"2025-12-13T13:11:33.988842-06:00","dependencies":[{"issue_id":"zine-wmu.3","depends_on_id":"zine-wmu","type":"parent-child","created_at":"2025-12-13T13:11:33.989188-06:00","created_by":"daemon"}]}
{"id":"zine-wmu.4","title":"Create Library screen Replicache subscription","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:34.054933-06:00","updated_at":"2025-12-13T13:11:34.054933-06:00","dependencies":[{"issue_id":"zine-wmu.4","depends_on_id":"zine-wmu","type":"parent-child","created_at":"2025-12-13T13:11:34.05526-06:00","created_by":"daemon"}]}
{"id":"zine-wmu.5","title":"Add Library scoped search with offline support","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:11:34.122099-06:00","updated_at":"2025-12-13T13:11:34.122099-06:00","dependencies":[{"issue_id":"zine-wmu.5","depends_on_id":"zine-wmu","type":"parent-child","created_at":"2025-12-13T13:11:34.122391-06:00","created_by":"daemon"}]}
{"id":"zine-z0b","title":"Replicache Sync API Endpoints","description":"**DEPENDS ON: zine-hcb (UserDO), zine-shu (Worker Setup)**\n\nImplement the Replicache push/pull HTTP endpoints that route requests to the appropriate per-user Durable Object.\n\n## Why This Matters\nThese endpoints are the bridge between the mobile client and the UserDO. They handle authentication, extract user ID, and route to the correct DO instance.\n\n## Implementation Details\n\n### Route Structure (routes/sync.ts)\n```typescript\nimport { Hono } from 'hono';\nimport { authMiddleware } from '../middleware/auth';\n\nconst sync = new Hono\u003c{ Bindings: Bindings; Variables: { userId: string } }\u003e();\n\n// Apply auth to all sync routes\nsync.use('*', authMiddleware);\n\n// POST /api/replicache/push\nsync.post('/push', async (c) =\u003e {\n  const userId = c.get('userId');\n  const body = await c.req.json();\n  \n  // Get or create DO for this user\n  const id = c.env.USER_DO.idFromName(userId);\n  const stub = c.env.USER_DO.get(id);\n  \n  // Forward request to DO\n  const response = await stub.fetch('http://do/push', {\n    method: 'POST',\n    body: JSON.stringify(body),\n    headers: { 'Content-Type': 'application/json' },\n  });\n  \n  return response;\n});\n\n// POST /api/replicache/pull\nsync.post('/pull', async (c) =\u003e {\n  const userId = c.get('userId');\n  const body = await c.req.json();\n  \n  const id = c.env.USER_DO.idFromName(userId);\n  const stub = c.env.USER_DO.get(id);\n  \n  const response = await stub.fetch('http://do/pull', {\n    method: 'POST',\n    body: JSON.stringify(body),\n    headers: { 'Content-Type': 'application/json' },\n  });\n  \n  return response;\n});\n\nexport default sync;\n```\n\n### User ID Extraction from Clerk Token\n```typescript\n// lib/auth.ts\nimport { jwtVerify } from 'jose';\n\nexport async function verifyClerkToken(\n  token: string,\n  secretKey: string\n): Promise\u003c{ sub: string } | null\u003e {\n  try {\n    // Clerk tokens are JWTs - verify signature and extract user ID\n    const { payload } = await jwtVerify(\n      token,\n      new TextEncoder().encode(secretKey)\n    );\n    return { sub: payload.sub as string };\n  } catch {\n    return null;\n  }\n}\n```\n\n### Request/Response Types\n```typescript\n// From @zine/shared\ninterface PushRequest {\n  clientGroupID: string;\n  mutations: Array\u003c{\n    id: number;\n    name: string;\n    args: unknown;\n    timestamp: number;\n  }\u003e;\n}\n\ninterface PullRequest {\n  clientGroupID: string;\n  cookie: number | null;\n  schemaVersion: string;\n}\n\ninterface PullResponse {\n  cookie: number;\n  lastMutationIDChanges: Record\u003cstring, number\u003e;\n  patch: Array\u003c{ op: 'put' | 'del'; key: string; value?: unknown }\u003e;\n}\n```\n\n## Parallelization\n- Tasks 1-2 (push/pull routes) can run IN PARALLEL\n- Task 3 (user ID extraction) should be done first (part of auth)\n- Task 4 (DO routing) is integrated into tasks 1-2\n- Tasks 5-6 (tests) run last, can be PARALLEL\n\n## Key Files\n- `apps/worker/src/routes/sync.ts`\n- `apps/worker/src/routes/sync.test.ts`\n\n## Acceptance Criteria\n- [ ] Authenticated requests route to correct UserDO\n- [ ] Unauthenticated requests return 401\n- [ ] Push mutations are forwarded to DO and processed\n- [ ] Pull returns correct patches from DO","status":"open","priority":0,"issue_type":"epic","created_at":"2025-12-13T13:11:13.065942-06:00","updated_at":"2025-12-13T13:15:54.445886-06:00"}
{"id":"zine-z0b.1","title":"Create POST /api/replicache/push route","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:13.136761-06:00","updated_at":"2025-12-13T13:11:13.136761-06:00","dependencies":[{"issue_id":"zine-z0b.1","depends_on_id":"zine-z0b","type":"parent-child","created_at":"2025-12-13T13:11:13.137094-06:00","created_by":"daemon"}]}
{"id":"zine-z0b.2","title":"Create POST /api/replicache/pull route","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:13.206919-06:00","updated_at":"2025-12-13T13:11:13.206919-06:00","dependencies":[{"issue_id":"zine-z0b.2","depends_on_id":"zine-z0b","type":"parent-child","created_at":"2025-12-13T13:11:13.207262-06:00","created_by":"daemon"}]}
{"id":"zine-z0b.3","title":"Implement user ID extraction from Clerk token","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:13.276693-06:00","updated_at":"2025-12-13T13:11:13.276693-06:00","dependencies":[{"issue_id":"zine-z0b.3","depends_on_id":"zine-z0b","type":"parent-child","created_at":"2025-12-13T13:11:13.277004-06:00","created_by":"daemon"}]}
{"id":"zine-z0b.4","title":"Route sync requests to correct UserDO instance","description":"","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-13T13:11:13.341259-06:00","updated_at":"2025-12-13T13:11:13.341259-06:00","dependencies":[{"issue_id":"zine-z0b.4","depends_on_id":"zine-z0b","type":"parent-child","created_at":"2025-12-13T13:11:13.341575-06:00","created_by":"daemon"}]}
{"id":"zine-z0b.5","title":"Write sync route tests","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:11:13.404648-06:00","updated_at":"2025-12-13T13:11:13.404648-06:00","dependencies":[{"issue_id":"zine-z0b.5","depends_on_id":"zine-z0b","type":"parent-child","created_at":"2025-12-13T13:11:13.404979-06:00","created_by":"daemon"}]}
{"id":"zine-z0b.6","title":"Write Replicache push/pull integration tests","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T13:11:13.477507-06:00","updated_at":"2025-12-13T13:11:13.477507-06:00","dependencies":[{"issue_id":"zine-z0b.6","depends_on_id":"zine-z0b","type":"parent-child","created_at":"2025-12-13T13:11:13.477864-06:00","created_by":"daemon"}]}
